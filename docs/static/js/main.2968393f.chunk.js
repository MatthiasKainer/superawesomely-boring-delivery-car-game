(this["webpackJsonpfarewell-tom"]=this["webpackJsonpfarewell-tom"]||[]).push([[0],{19:function(e,r){e.exports="data:image/png;base64,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"},20:function(e,r,o){e.exports=o.p+"static/media/tdrc01_car04_a.923c0440.png"},22:function(e,r,o){e.exports=o(45)},27:function(e,r,o){},31:function(e){e.exports=JSON.parse('{"next":"level1","dimensions":[3,3],"fields":[["road corner up-left","road horizontal","road corner up-right"],["road vertical","meadows blocked","road vertical"],["road corner down-left","road horizontal","road corner down-right"]],"player":[2,2],"customers":[[0,0,4]],"obstacles":{"broken_car":{"type":"car","position":[0,2]}}}')},32:function(e){e.exports=JSON.parse('{"next":"level2","dimensions":[5,5],"fields":[["road corner up-left","road horizontal","road horizontal","road horizontal","road corner up-right"],["road vertical","meadows blocked","meadows blocked","meadows blocked","road vertical"],["road vertical","meadows blocked","meadows blocked","meadows blocked","road vertical"],["road vertical","meadows blocked","meadows blocked","meadows blocked","road vertical"],["road corner down-left","road horizontal","road horizontal","road horizontal","road corner down-right"]],"player":[4,4],"customers":[[3,0,11],[0,1,7]],"obstacles":{}}')},33:function(e){e.exports=JSON.parse('{"next":"level3","dimensions":[5,5],"fields":[["road corner up-left","road horizontal","road crossing horizontal-up","road horizontal","road corner up-right"],["road vertical","road corner up-left","road crossing horizontal-vertical","road corner up-right","road vertical"],["road crossing vertical-left","road corner down-right","road vertical","road corner down-left","road crossing vertical-right"],["road vertical","road corner up-left","road corner down-right","meadows blocked","road vertical"],["road corner down-left","road crossing horizontal-down","road horizontal","road horizontal","road corner down-right"]],"player":[4,4],"customers":[[3,0,9],[2,2,6],[4,3,23],[0,3,15]],"obstacles":{"broken_car":{"type":"broken-car","position":[0,4]},"driving_car":{"type":"driving-car","position":[0,0],"directions":["RIGHT","RIGHT","DOWN","LEFT","DOWN","LEFT","UP","UP"],"speed":500}}}')},34:function(e){e.exports=JSON.parse('{"next":"level4","dimensions":[10,5],"fields":[["road corner up-left","road horizontal","road crossing horizontal-up","road horizontal","road horizontal","road horizontal","road horizontal","road horizontal","road horizontal","road corner up-right"],["road vertical","road corner up-left","road crossing horizontal-vertical","road corner up-right","meadows blocked","meadows blocked","meadows blocked","meadows blocked","meadows blocked","road vertical"],["road crossing vertical-left","road corner down-right","road vertical","road corner down-left","road crossing horizontal-up","road horizontal","road horizontal","road horizontal","road horizontal","road crossing vertical-right"],["road vertical","road corner up-left","road crossing horizontal-down","road horizontal","road crossing vertical-right","meadows","meadows","meadows","meadows","road vertical"],["road corner down-left","road crossing horizontal-down","road horizontal","road horizontal","road crossing horizontal-down","road horizontal","road horizontal","road horizontal","road horizontal","road corner down-right"]],"player":[9,4],"customers":[[9,1,3],[3,0,999],[2,2,13],[2,1,12],[4,3,18],[0,3,26]],"obstacles":{"broken_car":{"type":"broken-car","position":[0,4]},"driving_car1":{"type":"driving-car","position":[0,0],"directions":["RIGHT","RIGHT","RIGHT","RIGHT","RIGHT","RIGHT","RIGHT","RIGHT","RIGHT","DOWN","DOWN","LEFT","LEFT","LEFT","LEFT","LEFT","LEFT","UP","LEFT","LEFT","DOWN","LEFT","UP","UP"],"speed":500},"driving_car2":{"type":"driving-car","position":[0,0],"directions":["RIGHT","RIGHT","DOWN","LEFT","DOWN","LEFT","UP","UP"],"speed":500},"driving_car3":{"type":"driving-car","position":[1,4],"directions":["UP","RIGHT","RIGHT","RIGHT","DOWN","LEFT","LEFT","LEFT"],"speed":500},"driving_car4":{"type":"driving-car","position":[1,4],"directions":["UP","RIGHT","RIGHT","RIGHT","DOWN","LEFT","LEFT","LEFT","UP","RIGHT","RIGHT","RIGHT","DOWN","LEFT","LEFT","LEFT","UP","RIGHT","UP","UP","RIGHT","DOWN","RIGHT","DOWN","DOWN","LEFT","LEFT","LEFT"],"speed":500}}}')},35:function(e){e.exports=JSON.parse('{"next":"level5","dimensions":[10,5],"fields":[["road corner up-left","road horizontal","road crossing horizontal-up","road horizontal","road horizontal","road horizontal","road horizontal","road horizontal","road horizontal","road corner up-right"],["road vertical","road corner up-left","road crossing horizontal-vertical","road corner up-right","meadows blocked","meadows blocked","meadows blocked","meadows blocked","meadows blocked","road vertical"],["road crossing vertical-left","road corner down-right","road vertical","road corner down-left","road crossing horizontal-up","road horizontal","road horizontal","road horizontal","road horizontal","road crossing vertical-right"],["road vertical","road corner up-left","road crossing horizontal-down","road horizontal","road crossing vertical-right","meadows","meadows","meadows","meadows","road vertical"],["road corner down-left","road crossing horizontal-down","road horizontal","road horizontal","road crossing horizontal-down","road horizontal","road horizontal","road horizontal","road horizontal","road corner down-right"]],"player":[9,4],"customers":[[9,1,3],[3,0,47],[9,0,50],[2,2,13],[2,1,12],[4,3,18],[0,3,26],[1,4,40]],"obstacles":{"broken_car":{"type":"broken-car","position":[0,4]},"driving_car1":{"type":"driving-car","position":[0,0],"directions":["RIGHT","RIGHT","RIGHT","RIGHT","RIGHT","RIGHT","RIGHT","RIGHT","RIGHT","DOWN","DOWN","LEFT","LEFT","LEFT","LEFT","LEFT","LEFT","UP","LEFT","LEFT","DOWN","LEFT","UP","UP"],"speed":500},"driving_car2":{"type":"driving-car","position":[0,0],"directions":["RIGHT","RIGHT","DOWN","LEFT","DOWN","LEFT","UP","UP"],"speed":500},"driving_car3":{"type":"driving-car","position":[1,4],"directions":["UP","RIGHT","RIGHT","RIGHT","DOWN","LEFT","LEFT","LEFT"],"speed":500},"driving_car4":{"type":"driving-car","position":[1,4],"directions":["UP","RIGHT","RIGHT","RIGHT","DOWN","LEFT","LEFT","LEFT","UP","RIGHT","RIGHT","RIGHT","DOWN","LEFT","LEFT","LEFT","UP","RIGHT","UP","UP","RIGHT","DOWN","RIGHT","DOWN","DOWN","LEFT","LEFT","LEFT"],"speed":500},"driving_car5":{"type":"driving-car","position":[9,2],"directions":["LEFT","LEFT","LEFT","LEFT","LEFT","DOWN","DOWN","RIGHT","RIGHT","RIGHT","RIGHT","RIGHT","UP","UP"],"speed":500}}}')},36:function(e){e.exports=JSON.parse('{"dimensions":[10,10],"fields":[["road corner up-left","road horizontal","road crossing horizontal-up","road horizontal","road crossing horizontal-up","road corner up-right","road corner up-left","road horizontal","road corner up-right","meadows"],["road vertical","road corner up-left","road crossing horizontal-vertical","road corner up-right","road corner down-left","road corner down-right","road vertical","meadows","road vertical","meadows"],["road crossing vertical-left","road corner down-right","road vertical","road corner down-left","road crossing horizontal-up","road horizontal","road crossing vertical-right","meadows","road vertical","meadows"],["road vertical","road corner up-left","road crossing horizontal-down","road crossing horizontal-up","road crossing vertical-right","meadows","road vertical","meadows","road vertical","meadows"],["road vertical","road crossing vertical-left","road horizontal","road crossing horizontal-down","road crossing vertical-right","meadows","road vertical","meadows","road crossing vertical-left","road horizontal"],["road vertical","road crossing vertical-left","road horizontal","road horizontal","road crossing vertical-right","meadows","road vertical","meadows","road vertical","meadows"],["road vertical","road crossing vertical-left","road crossing horizontal-up","road horizontal","road crossing vertical-right","meadows","road vertical","meadows","road vertical","meadows"],["road vertical","road crossing vertical-left","road crossing horizontal-down","road horizontal","road crossing vertical-right","meadows","road vertical","meadows","road vertical","meadows"],["road vertical","road crossing vertical-left","road horizontal","road horizontal","road crossing vertical-right","meadows","road vertical","meadows","road vertical","meadows"],["road corner down-left","road crossing horizontal-down","road horizontal","road horizontal","road crossing horizontal-down","road horizontal","road crossing horizontal-down","road horizontal","road corner down-right","meadows"]],"player":[9,4],"customers":[[1,4,30],[7,0,6],[5,2,10],[5,0,20],[4,1,18],[1,1,25],[1,0,40],[0,3,40],[4,4,49],[1,5,53],[4,5,57],[2,6,63],[1,6,63],[2,7,63],[3,7,63],[1,8,66],[3,8,70],[2,9,72],[8,9,92],[8,5,99],[6,8,89]],"obstacles":{"driving_car_round1":{"type":"driving-car","position":[6,0],"directions":["DOWN","DOWN","DOWN","DOWN","DOWN","DOWN","DOWN","DOWN","DOWN","RIGHT","RIGHT","UP","UP","UP","UP","UP","UP","UP","UP","UP","LEFT","LEFT"],"speed":500},"driving_car_round2":{"type":"driving-car","position":[6,3],"directions":["DOWN","DOWN","DOWN","DOWN","DOWN","DOWN","RIGHT","RIGHT","UP","UP","UP","UP","UP","UP","UP","UP","UP","LEFT","LEFT","DOWN","DOWN","DOWN"],"speed":500},"driving_car_round3":{"type":"driving-car","position":[6,5],"directions":["DOWN","DOWN","DOWN","DOWN","RIGHT","RIGHT","UP","UP","UP","UP","UP","UP","UP","UP","UP","LEFT","LEFT","DOWN","DOWN","DOWN","DOWN","DOWN"],"speed":500},"driving_car_round4":{"type":"driving-car","position":[6,7],"directions":["DOWN","DOWN","RIGHT","RIGHT","UP","UP","UP","UP","UP","UP","UP","UP","UP","LEFT","LEFT","DOWN","DOWN","DOWN","DOWN","DOWN","DOWN","DOWN"],"speed":500},"driving_car_round5":{"type":"driving-car","position":[6,9],"directions":["RIGHT","RIGHT","UP","UP","UP","UP","UP","UP","UP","UP","UP","LEFT","LEFT","DOWN","DOWN","DOWN","DOWN","DOWN","DOWN","DOWN","DOWN","DOWN"],"speed":500},"driving_car_round6":{"type":"driving-car","position":[8,9],"directions":["UP","UP","UP","UP","UP","UP","UP","UP","UP","LEFT","LEFT","DOWN","DOWN","DOWN","DOWN","DOWN","DOWN","DOWN","DOWN","DOWN","RIGHT","RIGHT"],"speed":500},"driving_car_round7":{"type":"driving-car","position":[8,7],"directions":["UP","UP","UP","UP","UP","UP","UP","LEFT","LEFT","DOWN","DOWN","DOWN","DOWN","DOWN","DOWN","DOWN","DOWN","DOWN","RIGHT","RIGHT","UP","UP"],"speed":500},"driving_car_round8":{"type":"driving-car","position":[8,5],"directions":["UP","UP","UP","UP","UP","LEFT","LEFT","DOWN","DOWN","DOWN","DOWN","DOWN","DOWN","DOWN","DOWN","DOWN","RIGHT","RIGHT","UP","UP","UP","UP"],"speed":500},"driving_car_round9":{"type":"driving-car","position":[8,2],"directions":["UP","UP","LEFT","LEFT","DOWN","DOWN","DOWN","DOWN","DOWN","DOWN","DOWN","DOWN","DOWN","RIGHT","RIGHT","UP","UP","UP","UP","UP","UP","UP"],"speed":500},"driving_car_round10":{"type":"driving-car","position":[8,0],"directions":["LEFT","LEFT","DOWN","DOWN","DOWN","DOWN","DOWN","DOWN","DOWN","DOWN","DOWN","RIGHT","RIGHT","UP","UP","UP","UP","UP","UP","UP","UP","UP"],"speed":500},"driving_car_corner_top_round":{"type":"driving-car","position":[0,0],"directions":["RIGHT","RIGHT","DOWN","LEFT","DOWN","LEFT","UP","UP"],"speed":1000},"driving_car_corner_area1":{"type":"driving-car","position":[1,3],"directions":["DOWN","RIGHT","RIGHT","RIGHT","DOWN","LEFT","LEFT","LEFT","DOWN","RIGHT","RIGHT","RIGHT","UP","UP","UP","LEFT","LEFT","LEFT"],"speed":500}}}')},37:function(e,r,o){},41:function(e,r,o){},42:function(e,r,o){},43:function(e,r,o){},44:function(e,r,o){},45:function(e,r,o){"use strict";o.r(r);var t={};o.r(t),o.d(t,"tutorial",(function(){return b})),o.d(t,"level1",(function(){return w})),o.d(t,"level2",(function(){return N})),o.d(t,"level3",(function(){return W})),o.d(t,"level4",(function(){return E})),o.d(t,"level5",(function(){return L})),o.d(t,"none",(function(){return A}));var n=o(0),a=o.n(n),i=o(15),c=o.n(i),s=(o(27),o(1)),l=o(2),d=o(3),u=o(7),p=o(6),v=o(5),h={},O=function(e){delete h[e]},g=function(){function e(){Object(l.a)(this,e),this.LOOP_INTERVAL=50}return Object(d.a)(e,[{key:"setup",value:function(){var e=this;this.interval=setInterval((function(){e.loop()}),this.LOOP_INTERVAL)}},{key:"loop",value:function(){Object.keys(h).forEach((function(e){h[e]&&h[e]()}))}},{key:"stop",value:function(){delete this.interval}}]),e}(),f={MENU:0,PLAY:1,WIN:2,LOOSE:3},m={CoreReducer:{gameState:f.MENU,level:Object(s.a)({},{currentLevel:"tutorial"})}},T=function(e){Object(u.a)(o,e);var r=Object(p.a)(o);function o(){return Object(l.a)(this,o),r.apply(this,arguments)}return Object(d.a)(o,[{key:"render",value:function(){return this.props.startPlaying(),""}}]),o}(n.Component),P=Object(v.b)((function(e){return Object(s.a)({},e)}),(function(e){return{startPlaying:function(){return e((function(e){e({type:"CORE.CHANGE_STATE",payload:"PLAY"})}))}}}))(T),b=o(31),w=o(32),N=o(33),W=o(34),E=o(35),L=o(36),A={},y=function(e){return{left:64*e[0],top:64*e[1]}},D=(o(37),o(8)),U=o(10),I=function(e,r){return e=e.position?e.position:e,r=r.position?r.position:r,Object(U.isArray)(e)&&Object(U.isArray)(r)&&e.length>=2&&r.length>=2&&e[0]===r[0]&&e[1]===r[1]},R=(o(41),function(e){var r=e.tileset;return a.a.createElement("div",{className:"tile ".concat(r)})}),k=function(e,r){if(!e||!e.fields)return null;var o=e.fields[r[1]];if(!o)return null;var t=o[r[0]];return t||null},z={LEFT:0,RIGHT:1,UP:2,DOWN:3},G=function(e){var r=e.map,o=e.direction,t=e.obstacles,n=e.player,a=Object(D.a)(r.player);n&&n.position&&(a=Object(D.a)(n.position));var i="";switch(o){case z.LEFT:a[0]--,i="left";break;case z.RIGHT:a[0]++,i="right";break;case z.UP:a[1]--,i="up";break;case z.DOWN:a[1]++,i="down";break;default:return{success:!1,reason:"You moved in a very weird direction I can't handle"}}return function(e,r){var o=k(e,r);return!o||-1!==o.indexOf("blocked")}(r,a)||function(e,r){return!!e&&Object.keys(e).some((function(o){return I(e[o],r)}))}(t,a)||function(e,r,o){var t=k(e,r),n=["up","down"].includes(o)?"vertical":"horizontal";return-1===t.indexOf(o)&&-1===t.indexOf(n)}(r,a,i)?{success:!1,reason:"You crashed!"}:{success:!0,position:a}},H=function(e){var r,o=e.player,t=e.startPosition;return o=o||{position:t,lastDirection:""},a.a.createElement("div",{className:"sprite player ".concat((r=o.lastDirection,Object.keys(z).find((function(e){return z[e]===r})))),style:y(o.position)})},F=(o(42),function(e){var r=e.positions;return r?r.map((function(e,r){return a.a.createElement("div",{key:"customer-".concat(r),className:"sprite customer",style:y(e)},e[2])})):""}),j=(o(43),function(e,r,o){if(o){var t=(new Date).getTime()+r.speed;r.currentIndex=-1;var n="obstacle.".concat(e);return function(e,r){if(h[e])throw new Error("An item with this key has already been registered");h[e]=r}("obstacle.".concat(e),(function(){(new Date).getTime()<t||(t=(new Date).getTime()+r.speed,o(e))})),n}}),C=function(e){Object(u.a)(o,e);var r=Object(p.a)(o);function o(){var e;Object(l.a)(this,o);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(e=r.call.apply(r,[this].concat(n))).keys=[],e}return Object(d.a)(o,[{key:"loadObstacles",value:function(e){var r=this,o=e.obstacles,t=e.initialObstacles;Object.keys(t).forEach((function(n){if(!r.keys.includes("obstacle.".concat(n))){var a=o?o[n]:t[n];a&&a.directions&&r.keys.push(j(n,a,e.onMoveObstacle))}}))}},{key:"componentWillMount",value:function(){this.keys.forEach((function(e){return O(e)})),this.loadObstacles(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.loadObstacles(e)}},{key:"componentWillUnmount",value:function(){this.keys.forEach((function(e){return O(e)}))}},{key:"render",value:function(){var e=this.props,r=e.obstacles,o=e.initialObstacles;return Object.keys(o).map((function(e){var t=r?r[e]:o[e];if(!t)return console.log(r),console.log(o),console.log("Obstacle ".concat(e," could not be loaded!")),"";var n=t.currentDirection||"";return a.a.createElement("div",{key:"obstacle-".concat(e),className:"sprite obstacle ".concat(t.type," ").concat(n),style:y(t.position)})}))}}]),o}(n.Component),S=(o(44),function(e){Object(u.a)(o,e);var r=Object(p.a)(o);function o(){return Object(l.a)(this,o),r.apply(this,arguments)}return Object(d.a)(o,[{key:"componentWillMount",value:function(){var e=this.props.currentLevel;this.currentLevel=t[e],this.props.mapLoaded&&this.props.mapLoaded(this.currentLevel)}},{key:"componentWillReceiveProps",value:function(e){e.currentLevel!==this.props.currentLevel&&(this.currentLevel=t[e.currentLevel],this.props.mapLoaded&&this.props.mapLoaded(this.currentLevel))}},{key:"render",value:function(){var e=this.currentLevel.fields.map((function(e,r){return a.a.createElement("div",{key:"row-".concat(r),className:"row"},e.map((function(e,o){return a.a.createElement(R,{key:"item-".concat(r,"-").concat(o),tileset:e,position:[o,r]})})))})),r=64*this.currentLevel.dimensions[0],o=this.props.obstacles;return a.a.createElement("div",{className:"gameField",style:{width:r}},e,a.a.createElement(H,{player:this.props.player,startPosition:this.currentLevel.player}),a.a.createElement(F,{positions:this.props.customers}),a.a.createElement(C,{initialObstacles:this.currentLevel.obstacles,obstacles:o,onMoveObstacle:this.props.onMoveObstacle}))}}]),o}(n.Component)),M=Object(v.b)((function(e){var r=e.CoreReducer;return{player:r.player,customers:r.customers,obstacles:r.obstacles,currentLevel:e.CoreReducer.level.currentLevel}}),(function(e){return{mapLoaded:function(r){return e(function(e){return function(r){r({type:"CORE.MAP_LOADED",payload:e})}}(r))},onMoveObstacle:function(r){return e(function(e){return function(r){r({type:"ACTION.MOVE_OBSTACLE",payload:e})}}(r))}}}))(S),Y=function(e){var r=e.reason;return a.a.createElement("div",null,a.a.createElement("h2",null,"You lost!"),a.a.createElement("p",null,r),a.a.createElement("button",{onClick:function(){return window.location.reload()}},"Try Again?"))},x=function(e){e.props;return a.a.createElement("div",null,a.a.createElement("h2",null,"You won! That was unexpected..."),a.a.createElement("button",{onClick:function(){return window.location.reload()}},"Try Again?"))},B=function(e){Object(u.a)(o,e);var r=Object(p.a)(o);function o(e){var t;return Object(l.a)(this,o),(t=r.call(this,e)).loop=new g,t.loop=new g,t.loop.setup(),t}return Object(d.a)(o,[{key:"componentWillReceiveProps",value:function(e){e.gameState===f.WIN&&this.props.level&&this.props.level.map.next&&this.props.nextLevel(this.props.level.map.next)}},{key:"componentWillUnmount",value:function(){this.loop.stop()}},{key:"render",value:function(){switch(this.props.gameState){case f.MENU:return a.a.createElement(P,null);case f.PLAY:return a.a.createElement(M,null);case f.WIN:return a.a.createElement(x,null);case f.LOOSE:return a.a.createElement(Y,{reason:this.props.reason})}return""}}]),o}(n.Component),Q=Object(v.b)((function(e){return Object(s.a)({},e.CoreReducer)}),(function(e){return{nextLevel:function(r){return e(function(e){return function(r){r({type:"CORE.NEXT_LEVEL",payload:e})}}(r))}}}))(B),V=o(19),J=o.n(V),Z=o(20),_=o.n(Z),X=function(e){Object(u.a)(o,e);var r=Object(p.a)(o);function o(e){var t;return Object(l.a)(this,o),t=r.call(this,e),document.onkeydown=function(e){return t.handleKeyDown(e)},t.swipedetect(document.getElementById("root"),(function(e){t.handleSwipe(e)})),t}return Object(d.a)(o,[{key:"swipedetect",value:function(e,r){if(e){var o,t,n,a,i,c,s=e,l=r||function(e){};s.addEventListener("touchstart",(function(e){var r=e.changedTouches[0];o="none",t=r.pageX,n=r.pageY,c=(new Date).getTime(),e.preventDefault()}),!1),s.addEventListener("touchmove",(function(e){e.preventDefault()}),!1),s.addEventListener("touchend",(function(e){var r=e.changedTouches[0];a=r.pageX-t,i=r.pageY-n,(new Date).getTime()-c<=300&&(Math.abs(a)>=150&&Math.abs(i)<=100?o=a<0?"left":"right":Math.abs(i)>=150&&Math.abs(a)<=100&&(o=i<0?"up":"down")),l(o),e.preventDefault()}),!1)}}},{key:"handleSwipe",value:function(e){var r=this.props.movePlayer;if(r)switch(console.log("Swiping ".concat(e)),e){case"left":return r(z.LEFT);case"up":return r(z.UP);case"right":return r(z.RIGHT);case"down":return r(z.DOWN);default:return!1}}},{key:"handleKeyDown",value:function(e){var r=this.props.movePlayer;if(r)switch(e.keyCode){case 37:return r(z.LEFT);case 38:return r(z.UP);case 39:return r(z.RIGHT);case 40:return r(z.DOWN);default:return!1}}},{key:"render",value:function(){var e=function(){var e;switch((null!==(e=window.location.hash)&&void 0!==e?e:"").replace("#","").toLowerCase()){case"porsche":return{cssClass:"porsche",logo:_.a,header:a.a.createElement(a.a.Fragment,null,"Get to the dealerships in time")};default:return{cssClass:"",logo:J.a,header:a.a.createElement(a.a.Fragment,null,"TOM",a.a.createElement("br",null),"Plan your Delivery!")}}}();return a.a.createElement("div",{className:"App "+e.cssClass},a.a.createElement("header",{className:"App-header"},a.a.createElement("img",{src:e.logo,className:"App-logo",alt:"logo"}),a.a.createElement("h1",{className:"App-title"},e.header),a.a.createElement("img",{src:e.logo,className:"App-logo",alt:"logo"}),a.a.createElement("div",{className:"help"},"Use your cursor keys or swipe over the game area")),a.a.createElement(Q,null))}}]),o}(n.Component),K=Object(v.b)((function(e){return Object(s.a)({},e)}),(function(e){return{movePlayer:function(r){return e(function(e){return function(r){r({type:"ACTION.MOVE_PLAYER",payload:e})}}(r))}}}))(X),q=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function $(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var r=e.installing;r.onstatechange=function(){"installed"===r.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var ee=o(9),re=o(21),oe=function(e){var r=Object(D.a)(e.position),o=Object(U.isNumber)(e.currentDirectionIndex)?e.currentDirectionIndex+1:0;o>=e.directions.length&&(o=0);var t=e.directions[o];switch(z[t]){case z.LEFT:r[0]--;break;case z.RIGHT:r[0]++;break;case z.UP:r[1]--;break;case z.DOWN:r[1]++;break;default:return e}return Object(s.a)(Object(s.a)({},e),{},{currentDirection:t,currentDirectionIndex:o,position:r})},te=function(e,r,o){if(!e)return{gameState:f.WIN};var t=o,n=void 0;return(e=e.filter((function(e){return!I(e,r)})).map((function(e){return(e=Object(D.a)(e))[2]--,e}))).some((function(e){return e[2]<1}))?(n="You missed a checkpoint",t=f.LOOSE):e.length<1&&(t=f.WIN),{customers:e,gameState:t,reason:n}},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return{"ACTION.MOVE_PLAYER":function(){var o=G({map:Object(s.a)({},e.level.map),player:Object(s.a)({},e.player),direction:r.payload,obstacles:e.obstacles});if(!o.success)return Object(s.a)(Object(s.a)({},e),{},{reason:o.reason,gameState:f.LOOSE});var t=te(e.customers,o.position,e.gameState);return Object(s.a)(Object(s.a)({},e),{},{reason:t.reason,gameState:t.gameState,player:Object(s.a)(Object(s.a)({},e.player),{},{lastDirection:r.payload,position:o.position}),customers:t.customers})},"ACTION.MOVE_OBSTACLE":function(){var o=Object(s.a)({},e.obstacles);if(o[r.payload]){o[r.payload]=oe(o[r.payload]);var t=e.gameState,n=void 0;return I(o[r.payload],e.player)&&(t=f.LOOSE,n="You crashed!"),Object(s.a)(Object(s.a)({},e),{},{reason:n,gameState:t,obstacles:o})}return e},"CORE.MAP_LOADED":function(){return Object(s.a)(Object(s.a)({},e),{},{level:Object(s.a)(Object(s.a)({},e.level),{},{map:r.payload}),obstacles:r.payload.obstacles?Object(s.a)({},r.payload.obstacles):{},customers:r.payload.customers?Object(D.a)(r.payload.customers):[],player:{position:r.payload.player?Object(D.a)(r.payload.player):[]}})},"CORE.CHANGE_STATE":function(){return Object(s.a)(Object(s.a)({},e),{},{gameState:f[r.payload]})},"CORE.NEXT_LEVEL":function(){return Object(s.a)(Object(s.a)({},e),{},{gameState:f.PLAY,level:{currentLevel:r.payload}})}}},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,o=ne(e,r)[r.type];return o?o():e};c.a.render(a.a.createElement(v.a,{store:Object(ee.d)(Object(ee.c)({CoreReducer:ae}),m,Object(ee.a)(re.a))},a.a.createElement(K,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/superawesomely-boring-delivery-game",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/superawesomely-boring-delivery-game","/service-worker.js");q?(!function(e){fetch(e).then((function(r){404===r.status||-1===r.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):$(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):$(e)}))}}()}},[[22,1,2]]]);
//# sourceMappingURL=main.2968393f.chunk.js.map