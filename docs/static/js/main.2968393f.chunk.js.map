{"version":3,"sources":["core/assets/player.png","core/assets/tdrc01_car04_a.png","core/Loop.js","core/State.js","core/Menu.js","core/CoreActions.js","data/levels/index.js","core/spriteUtils.js","core/Collision.js","core/Tile.js","core/player/Move.js","core/Player.js","core/Customer.js","core/Obstacles.js","core/Levels.js","core/Loose.js","core/Won.js","core/Engine.js","App.js","registerServiceWorker.js","core/obstacle/Move.js","core/customer/TikTok.js","core/CoreReducer.js","index.js","store.js"],"names":["module","exports","registered","removeFromEventLoop","key","Loop","LOOP_INTERVAL","this","interval","setInterval","loop","Object","keys","forEach","item","GameState","MENU","PLAY","WIN","LOOSE","initialState","CoreReducer","gameState","level","currentLevel","Menu","props","startPlaying","Component","connect","state","dispatch","type","payload","tutorial","require","level1","level2","level3","level4","level5","none","getPosition","position","left","top","collision","position1","position2","isArray","length","Tile","tileset","className","tileAtPosition","map","fields","row","column","Direction","LEFT","RIGHT","UP","DOWN","moveTo","direction","obstacles","player","from","success","reason","field","indexOf","isCollisionOnMap","some","isCollisionWithObstacle","vector","includes","isComingFromBadDirection","Player","startPosition","lastDirection","find","style","Customers","positions","customer","index","registerMovement","obstacleName","obstacle","onMoveObstacle","nextMove","Date","getTime","speed","currentIndex","Error","registerToEventLoop","Obstacles","initialObstacles","currentObstacle","directions","push","loadObstacles","nextProps","console","log","currentDirection","Levels","nextLevel","LevelLoader","mapLoaded","rows","rowIndex","colIndex","gameFieldWidth","dimensions","width","customers","name","moveObstacle","Loose","onClick","window","location","reload","Won","Engine","setup","next","stop","App","document","onkeydown","e","handleKeyDown","swipedetect","getElementById","swipedir","handleSwipe","el","callback","startX","startY","distX","distY","startTime","touchsurface","handleswipe","addEventListener","touchobj","changedTouches","pageX","pageY","preventDefault","Math","abs","movePlayer","keyCode","theme","hash","replace","toLowerCase","cssClass","logo","Porsche","header","themeConfig","src","alt","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","catch","error","moveObstacleTo","isNumber","currentDirectionIndex","handleCustomers","updatedGameState","undefined","filter","reducer","action","result","handledCustomers","current","ReactDOM","render","store","createStore","combineReducers","applyMiddleware","thunk","URL","process","origin","fetch","response","status","headers","get","ready","unregister","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.2968393f.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/tdrc01_car04_a.923c0440.png\";","const registered = {};\n\nconst registerToEventLoop = (key, item) => {\n    if (registered[key]) {\n        throw new Error(\"An item with this key has already been registered\");\n    }\n    registered[key] = item;\n}\n\nconst removeFromEventLoop = (key) => {\n    delete registered[key];\n}\n\nconst cleanEventLoop = () => { \n    Object.keys(registered).forEach(item => delete registered[item]);\n}\n\nclass Loop {\n    LOOP_INTERVAL=50;\n    interval;\n\n    setup() {\n        this.interval = setInterval(() => {\n            this.loop();\n        }, this.LOOP_INTERVAL);\n    }\n    loop() {\n        Object.keys(registered).forEach(item => {\n            if (registered[item]) registered[item]()\n        });\n    }\n    stop() {\n        delete this.interval;\n    }\n}\n\nexport {Loop, registerToEventLoop, removeFromEventLoop, cleanEventLoop};","const GameState = {\n    MENU : 0,\n    PLAY : 1,\n    WIN : 2,\n    LOOSE : 3\n}\n\nlet initialLevelState = {\n    level : {\n        currentLevel : \"tutorial\",\n    }\n}\n\nlet initialState = {\n    CoreReducer : {\n        gameState: GameState.MENU,\n        level : {...initialLevelState.level}\n    },\n};\n\nexport { GameState, initialState };","import {Component} from 'react';\nimport { connect } from 'react-redux';\nimport { startPlaying } from './CoreActions';\n\nexport class Menu extends Component {\n    render() {\n        // for now we don't have a menu..;\n        this.props.startPlaying();\n        return \"\";\n    }\n}\n\nconst mapStateToProps = state => ({\n  ...state\n});\n\nconst mapDispatchToProps = dispatch => ({\n    startPlaying: () => dispatch(startPlaying())\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Menu);","const startPlaying = () => dispatch => {\n    dispatch({\n        type: 'CORE.CHANGE_STATE',\n        payload: 'PLAY'\n    });\n}\n\nconst mapLoaded = (map) => dispatch => {\n    dispatch({\n        type: 'CORE.MAP_LOADED',\n        payload: map\n    });\n}\n\nconst movePlayer = (direction) => dispatch => {\n    dispatch({\n        type: \"ACTION.MOVE_PLAYER\",\n        payload : direction\n    })\n}\n\nconst moveObstacle = (name) => dispatch => {\n    dispatch({\n        type: \"ACTION.MOVE_OBSTACLE\",\n        payload : name\n    })\n}\n\nconst nextLevel = (level) => dispatch => {\n    dispatch({\n        type: \"CORE.NEXT_LEVEL\",\n        payload : level\n    })\n}\n\nexport {startPlaying, mapLoaded, movePlayer, nextLevel, moveObstacle};","const tutorial = require(\"./tutorial.json\");\nconst level1 = require(\"./level1.json\");\nconst level2 = require(\"./level2.json\");\nconst level3 = require(\"./level3.json\");\nconst level4 = require(\"./level4.json\");\nconst level5 = require(\"./level5.json\");\nconst none = {};\n\nexport { tutorial, level1, level2, level3, level4, level5, none };","const TILE_SIZE = 64;\n\nconst getPosition = (position) => ({\n    left: TILE_SIZE * position[0],\n    top: TILE_SIZE * position[1]\n});\n\nexport {TILE_SIZE, getPosition}","import { isArray } from \"util\";\n\nexport const collision = (position1, position2) => {\n    position1 = position1.position ? position1.position : position1;\n    position2 = position2.position ? position2.position : position2;\n    return isArray(position1) && isArray(position2) &&\n            position1.length >= 2 && position2.length >= 2 &&\n            position1[0] === position2[0] &&\n            position1[1] === position2[1];\n}","import React from 'react';\n\nimport './Tile.css';\n\nconst Tile = ({tileset}) => \n    <div className={`tile ${tileset}`}></div>;\n\nexport default Tile;\n\nexport const tileAtPosition = (map, position) => {\n    if (!map || !map.fields) return null;\n\n    const row = map.fields[position[1]];\n    if (!row) return null;\n    const column = row[position[0]]\n    if (!column) return null;\n\n    return column;\n}","import { collision } from \"../Collision\";\nimport { tileAtPosition } from \"../Tile\";\n\nexport const Direction = {\n    LEFT: 0,\n    RIGHT: 1,\n    UP: 2,\n    DOWN: 3\n}\n\nexport const directionAsString = (direction) => {\n    return Object.keys(Direction)\n            .find(key => Direction[key] === direction);\n}\n\nconst isCollisionOnMap = (map, position) => {\n    const field = tileAtPosition(map, position);\n    return (!field || field.indexOf(\"blocked\") !== -1)\n};\n\nconst isComingFromBadDirection = (map, position, direction) => {\n    const field = tileAtPosition(map, position);\n    const vector = [\"up\", \"down\"].includes(direction) ? \"vertical\" : \"horizontal\";\n    return (field.indexOf(direction) === -1 &&\n        field.indexOf(vector) === -1);\n};\n\nconst isCollisionWithObstacle = (obstacles, position) => {\n    if (!obstacles) return false;\n    return Object.keys(obstacles).some(key => {\n        return collision(obstacles[key], position);\n    });\n}\n\nexport const moveTo = ({ map, direction, obstacles, player }) => {\n    let position = [...map.player]\n    if (player && player.position) {\n        position = [...player.position];\n    }\n    let from = \"\";\n    switch (direction) {\n        case Direction.LEFT:\n            position[0]--;\n            from = \"left\";\n            break;\n        case Direction.RIGHT:\n            position[0]++;\n            from = \"right\";\n            break;\n        case Direction.UP:\n            position[1]--;\n            from = \"up\";\n            break;\n        case Direction.DOWN:\n            position[1]++;\n            from = \"down\";\n            break;\n        default:\n            return { success: false, reason: \"You moved in a very weird direction I can't handle\" };\n    }\n\n    if (isCollisionOnMap(map, position)) {\n        return { success: false, reason: \"You crashed!\" };\n    }\n\n    if (isCollisionWithObstacle(obstacles, position)) {\n        return { success: false, reason: \"You crashed!\" };\n    }\n\n    if (isComingFromBadDirection(map, position, from)) {\n        return { success: false, reason: \"You crashed!\" };\n    }\n\n    return {\n        success: true,\n        position\n    }\n}","import React from \"react\";\nimport {getPosition} from \"./spriteUtils\";\nimport \"./Player.css\";\nimport { directionAsString } from \"./player/Move\";\n\nexport const Player = ({player, startPosition}) => {\n    player = player || { position : startPosition, lastDirection : \"\"};\n    return <div className={`sprite player ${directionAsString(player.lastDirection)}`} \n                style={getPosition(player.position)}></div>;\n}","import React from \"react\";\nimport {getPosition} from \"./spriteUtils\";\nimport \"./Customer.css\";\n\nexport const Customers = ({positions}) => {\n    if (!positions) return \"\";\n    return positions.map((customer, index) => <div key={`customer-${index}`} \n        className=\"sprite customer\" \n        style={getPosition(customer)}>{customer[2]}</div>);\n}","import React, {Component} from \"react\";\nimport {getPosition} from \"./spriteUtils\";\nimport \"./Obstacles.css\";\nimport { registerToEventLoop, removeFromEventLoop } from \"./Loop\";\n\nconst registerMovement = (obstacleName, obstacle, onMoveObstacle) => {\n    if (!onMoveObstacle) return;\n    let nextMove = new Date().getTime() + obstacle.speed;\n    obstacle.currentIndex = -1;\n    const key = `obstacle.${obstacleName}`;\n    registerToEventLoop(`obstacle.${obstacleName}`, () => {\n        if (new Date().getTime() < nextMove) return;\n        nextMove = new Date().getTime() + obstacle.speed;\n        onMoveObstacle(obstacleName);\n    });\n    return key;\n}\n\nexport class Obstacles extends Component {\n    keys = [];\n\n    loadObstacles(props) {\n        const {obstacles, initialObstacles} = props;\n        Object.keys(initialObstacles).forEach(obstacleName => {\n            if (this.keys.includes(`obstacle.${obstacleName}`)) return;\n            const currentObstacle = obstacles ? obstacles[obstacleName] : null || initialObstacles[obstacleName];\n            if (currentObstacle && currentObstacle.directions) {\n                this.keys.push(registerMovement(obstacleName, currentObstacle, props.onMoveObstacle));\n            }\n        });\n    }\n\n    componentWillMount() {\n        this.keys.forEach(key => removeFromEventLoop(key));\n        this.loadObstacles(this.props);\n    }\n\n    componentWillReceiveProps(nextProps) {\n        this.loadObstacles(nextProps);\n    }\n\n    componentWillUnmount() {\n        this.keys.forEach(key => removeFromEventLoop(key));\n    }\n\n    render() {\n        const {obstacles, initialObstacles} = this.props;\n        return Object.keys(initialObstacles).map(obstacleName => {\n            const currentObstacle = obstacles ? obstacles[obstacleName] : null || initialObstacles[obstacleName];\n            if (!currentObstacle) {\n                console.log(obstacles);\n                console.log(initialObstacles);\n                console.log(`Obstacle ${obstacleName} could not be loaded!`);\n                return \"\";\n            };\n            const direction = currentObstacle.currentDirection || \"\";\n            return <div \n                key={`obstacle-${obstacleName}`}\n                className={`sprite obstacle ${currentObstacle.type} ${direction}`}\n                style={getPosition(currentObstacle.position)}></div>\n        });\n    }\n}","import React, { Component } from 'react';\nimport * as LevelLoader from \"../data/levels\";\nimport { connect } from 'react-redux';\nimport { Player } from './Player';\nimport {Customers} from \"./Customer\";\nimport { Obstacles } from './Obstacles';\nimport Tile from './Tile';\nimport \"./Levels.css\"\nimport { TILE_SIZE } from './spriteUtils';\nimport { mapLoaded, moveObstacle } from './CoreActions';\n\nexport class Levels extends Component {\n    currentLevel;\n\n    componentWillMount() {\n        const nextLevel = this.props.currentLevel;\n        this.currentLevel = LevelLoader[nextLevel];\n        if (this.props.mapLoaded) { \n            this.props.mapLoaded(this.currentLevel); \n        }\n    }\n\n    componentWillReceiveProps(nextProps) {\n        if (nextProps.currentLevel === this.props.currentLevel) return;\n        this.currentLevel = LevelLoader[nextProps.currentLevel];\n        if (this.props.mapLoaded) { this.props.mapLoaded(this.currentLevel); }\n    }\n\n    render() {\n        const { fields } = this.currentLevel;\n        \n        const rows = fields.map((row, rowIndex) => {\n            return <div key={`row-${rowIndex}`} className=\"row\">{\n                row.map((item, colIndex) => <Tile key={`item-${rowIndex}-${colIndex}`} tileset={item} position={[colIndex, rowIndex]} />)\n            }</div>;\n        });\n        \n        const gameFieldWidth = this.currentLevel.dimensions[0] * TILE_SIZE;\n        const {obstacles} = this.props;\n\n        return <div className=\"gameField\" style={{width: gameFieldWidth}}>\n            {rows}\n            <Player player={this.props.player} startPosition={this.currentLevel.player} />\n            <Customers positions={this.props.customers} />\n            <Obstacles \n                initialObstacles={this.currentLevel.obstacles} \n                obstacles={obstacles}\n                onMoveObstacle={this.props.onMoveObstacle} />\n        </div>;\n    }\n}\nconst mapStateToProps = state => {\n    const {player, customers, obstacles} = state.CoreReducer;\n    const {currentLevel} = state.CoreReducer.level;\n    return ({\n        player,\n        customers,\n        obstacles,\n        currentLevel\n    })\n};\n\nconst mapDispatchToProps = dispatch => ({\n    mapLoaded : (map) => dispatch(mapLoaded(map)),\n    onMoveObstacle : (name) => dispatch(moveObstacle(name))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Levels);","import React from 'react';\n\nconst Loose = ({reason}) => {\n    return <div>\n        <h2>You lost!</h2>\n        <p>{reason}</p>\n        <button onClick={() => window.location.reload()}>Try Again?</button>\n    </div>\n}\n  \n  export default Loose;","import React from 'react';\n\nconst Won = ({props}) => {\n    return <div>\n        <h2>You won! That was unexpected...</h2>\n        <button onClick={() => window.location.reload()}>Try Again?</button>\n    </div>\n}\n  \n  export default Won;","import React, { Component } from 'react';\nimport { Loop } from \"./Loop\";\nimport { GameState } from './State';\nimport Menu from './Menu';\nimport Levels from './Levels';\nimport { connect } from 'react-redux';\nimport Loose from './Loose';\nimport Won from './Won';\nimport { nextLevel } from './CoreActions';\n\nexport class Engine extends Component {\n    loop = new Loop();\n\n    constructor(props) {\n        super(props);\n        this.loop = new Loop();\n        this.loop.setup();\n    }\n\n    componentWillReceiveProps(nextProps) {\n        if (nextProps.gameState === GameState.WIN && this.props.level && this.props.level.map.next) {\n            this.props.nextLevel(this.props.level.map.next);\n        }\n    }\n\n    componentWillUnmount() {\n        this.loop.stop();\n    }\n\n    render() {\n        switch (this.props.gameState) {\n            case GameState.MENU:\n                return <Menu />;\n            case GameState.PLAY:\n                return <Levels />;\n            case GameState.WIN:\n                return <Won />;\n            case GameState.LOOSE:\n                return <Loose reason={this.props.reason} />;\n            default:\n        }\n        return \"\";\n    }\n}\n\nconst mapStateToProps = state => ({\n    ...state.CoreReducer\n});\n\nconst mapDispatchToProps = dispatch => ({\n    nextLevel: (level) => dispatch(nextLevel(level))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Engine);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Engine from \"./core/Engine\";\nimport { movePlayer } from './core/CoreActions';\nimport { Direction } from './core/player/Move';\nimport Player from \"./core/assets/player.png\";\nimport Porsche from \"./core/assets/tdrc01_car04_a.png\"\n\n\nconst themeConfig = () => {\n    const theme = (window.location.hash ?? \"\").replace(\"#\", \"\")\n    switch (theme.toLowerCase()) {\n        case \"porsche\": return {\n            cssClass: \"porsche\",\n            logo: Porsche,\n            header: <>Get to the dealerships in time</>\n        }\n        default: return {\n            cssClass: \"\",\n            logo: Player,\n            header: <>TOM<br/>Plan your Delivery!</>\n        }\n    }\n}\n\nclass App extends Component {\n\n    constructor(props) {\n        super(props);\n        document.onkeydown = (e) => this.handleKeyDown(e);\n        this.swipedetect(document.getElementById('root'), (swipedir) => {\n            this.handleSwipe(swipedir);\n        });\n    }\n\n    swipedetect(el, callback) {\n        if (!el) return;\n        let touchsurface = el,\n            swipedir,\n            startX,\n            startY,\n            distX,\n            distY,\n            threshold = 150, //required min distance traveled to be considered swipe\n            restraint = 100, // maximum distance allowed at the same time in perpendicular direction\n            allowedTime = 300, // maximum time allowed to travel that distance\n            elapsedTime,\n            startTime,\n            handleswipe = callback || function (swipedir) { }\n\n        touchsurface.addEventListener('touchstart', (e) => {\n            const touchobj = e.changedTouches[0];\n            swipedir = 'none';\n            startX = touchobj.pageX;\n            startY = touchobj.pageY;\n            startTime = new Date().getTime(); // record time when finger first makes contact with surface\n            e.preventDefault();\n        }, false)\n\n        touchsurface.addEventListener('touchmove', (e) => {\n            e.preventDefault(); // prevent scrolling when inside DIV\n        }, false)\n\n        touchsurface.addEventListener('touchend', (e) => {\n            const touchobj = e.changedTouches[0];\n            distX = touchobj.pageX - startX; // get horizontal dist traveled by finger while in contact with surface\n            distY = touchobj.pageY - startY; // get vertical dist traveled by finger while in contact with surface\n            elapsedTime = new Date().getTime() - startTime; // get time elapsed\n            if (elapsedTime <= allowedTime) { // first condition for awipe met\n                if (Math.abs(distX) >= threshold && Math.abs(distY) <= restraint) { // 2nd condition for horizontal swipe met\n                    swipedir = (distX < 0) ? 'left' : 'right'; // if dist traveled is negative, it indicates left swipe\n                }\n                else if (Math.abs(distY) >= threshold && Math.abs(distX) <= restraint) { // 2nd condition for vertical swipe met\n                    swipedir = (distY < 0) ? 'up' : 'down'; // if dist traveled is negative, it indicates up swipe\n                }\n            }\n            handleswipe(swipedir);\n            e.preventDefault();\n        }, false);\n    }\n\n    handleSwipe(swipedir) {\n        const { movePlayer } = this.props;\n        if (!movePlayer) return;\n        // swipedir contains either \"none\", \"left\", \"right\", \"top\", or \"down\"\n        console.log(`Swiping ${swipedir}`);\n        switch (swipedir) {\n            case \"left\":\n                return movePlayer(Direction.LEFT);\n            case \"up\":\n                return movePlayer(Direction.UP);\n            case \"right\":\n                return movePlayer(Direction.RIGHT);\n            case \"down\":\n                return movePlayer(Direction.DOWN);\n            default:\n                return false;\n        }\n    }\n\n    handleKeyDown(e) {\n        const { movePlayer } = this.props;\n        if (!movePlayer) return;\n        switch (e.keyCode) {\n            case 37:\n                return movePlayer(Direction.LEFT);\n            case 38:\n                return movePlayer(Direction.UP);\n            case 39:\n                return movePlayer(Direction.RIGHT);\n            case 40:\n                return movePlayer(Direction.DOWN);\n            default:\n                return false;\n        }\n    }\n    render() {\n        const theme = themeConfig()\n\n        return (\n            <div className={\"App \" + theme.cssClass}>\n                <header className=\"App-header\">\n                    <img src={theme.logo} className=\"App-logo\" alt=\"logo\" />\n                    <h1 className=\"App-title\">{theme.header}</h1>\n                    <img src={theme.logo} className=\"App-logo\" alt=\"logo\" />\n                    <div className=\"help\">Use your cursor keys or swipe over the game area</div>\n                </header>\n                <Engine />\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = state => ({\n    ...state\n});\n\nconst mapDispatchToProps = dispatch => ({\n    movePlayer: (direction) => dispatch(movePlayer(direction))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { Direction } from \"../player/Move\";\nimport { isNumber } from \"util\";\n\nexport const moveObstacleTo = (obstacle) => {\n    const position = [...obstacle.position];\n    let index = isNumber(obstacle.currentDirectionIndex)\n        ? (obstacle.currentDirectionIndex+1)\n        : 0;\n    if (index >= obstacle.directions.length) {\n        index = 0;\n    }\n    \n    const direction = obstacle.directions[index];\n    switch (Direction[direction]) {\n        case Direction.LEFT:\n            position[0]--;\n            break;\n        case Direction.RIGHT:\n            position[0]++;\n            break;\n        case Direction.UP:\n            position[1]--;\n            break;\n        case Direction.DOWN:\n            position[1]++;\n            break;\n        default:\n            return obstacle;\n    }\n\n    return {\n        ...obstacle,\n        currentDirection : direction,\n        currentDirectionIndex : index,\n        position\n    }\n};","import { GameState } from \"../State\";\nimport { collision } from \"../Collision\";\n\nexport const handleCustomers = (customers, player, gameState) => {\n    if (!customers) { return { gameState: GameState.WIN }; }\n\n    customers = customers.filter(customer => {\n        return !collision(customer, player)\n    }).map(customer => {\n        customer = [...customer];\n        customer[2]--;\n        return customer;\n    });\n\n    let updatedGameState = gameState\n    let reason = undefined\n    if (customers.some(customer => customer[2] < 1)) {\n        reason = \"You missed a checkpoint\"\n        updatedGameState = GameState.LOOSE\n    }\n    else if (customers.length < 1) {\n        updatedGameState = GameState.WIN\n    }\n\n    return {\n        customers,\n        gameState: updatedGameState,\n        reason\n    }\n}\n","import { GameState } from \"./State\";\nimport { moveTo } from \"./player/Move\";\nimport { moveObstacleTo } from \"./obstacle/Move\";\nimport { collision } from \"./Collision\";\nimport { handleCustomers } from \"./customer/TikTok\";\n\nconst reducer = (state = {}, action) => {\n    return {\n        \"ACTION.MOVE_PLAYER\" : () => {\n            const result = moveTo({\n                map: { ...state.level.map },\n                player: { ...state.player },\n                direction: action.payload,\n                obstacles: state.obstacles\n            });\n            if (!result.success) return { \n                ...state, \n                reason: result.reason,\n                gameState: GameState.LOOSE \n            };\n\n            const handledCustomers = handleCustomers(state.customers, result.position, state.gameState)\n            return {\n                ...state,\n                reason: handledCustomers.reason,\n                gameState: handledCustomers.gameState,\n                player: { ...state.player, lastDirection: action.payload, position: result.position },\n                customers: handledCustomers.customers\n            };\n        },\n        \"ACTION.MOVE_OBSTACLE\" : () => {\n            const obstacles = { ...state.obstacles };\n            if (obstacles[action.payload]) {\n                obstacles[action.payload] = moveObstacleTo(obstacles[action.payload]);\n                let gameState = state.gameState;\n                let reason = undefined;\n                if (collision(obstacles[action.payload], state.player)) {\n                    gameState = GameState.LOOSE;\n                    reason = \"You crashed!\"\n                }\n\n                return {\n                    ...state,\n                    reason,\n                    gameState,\n                    obstacles\n                };\n            }\n            return state;\n        },\n        'CORE.MAP_LOADED': () => {\n            return {\n                ...state,\n                level: { ...state.level, map: action.payload },\n                obstacles: action.payload.obstacles ? { ...action.payload.obstacles } : {},\n                customers: action.payload.customers ? [...action.payload.customers] : [],\n                player: {\n                    position: action.payload.player ? [...action.payload.player] : []\n                }\n            };\n        },\n        'CORE.CHANGE_STATE': () => { return { ...state, gameState: GameState[action.payload] }},\n        'CORE.NEXT_LEVEL': () => {\n            return {\n                ...state,\n                gameState: GameState.PLAY,\n                level: { currentLevel: action.payload }\n            };\n        }\n    }\n}\n\nexport default (state = {}, action) => {\n    const current = reducer(state, action)[action.type];\n    return current ? current() : state;\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport registerServiceWorker from './registerServiceWorker';\nimport { Provider } from 'react-redux';\nimport configureStore from './store';\n\nReactDOM.render(\n    <Provider store={configureStore()}>\n        <App />\n    </Provider>,\n    document.getElementById('root')\n);\n\nregisterServiceWorker();\n","import { createStore, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport { combineReducers } from 'redux';\nimport {initialState} from \"./core/State\";\nimport CoreReducer from './core/CoreReducer';\n\nexport default function configureStore() {\n    return createStore(\n        combineReducers({ CoreReducer }),\n        initialState,\n        applyMiddleware(thunk)\n    );\n}\n"],"sourceRoot":""}